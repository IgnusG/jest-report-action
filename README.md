# Jest Github Actions Reporter

Creates annotations based on the output of `jest-junit` (see [how to configure `jest-junit` properly](./README.md#jest-junit-configuration)) in your test files.

## Example
```
    - uses: IgnusG/jest-report-action@v1.0
      if: always()
      with:
        access-token: ${{ secrets.GITHUB_TOKEN }}
``` 

<img src="./docs/example-main.png" alt="Example of Jest Annotations" />

## Inputs

### `access-token`

We'll need that to enrich the actions run with annotations. The secret is automatically generated by github.com.

### `junit-file`

The location and/or the name of the JUnit file. `jest-junit` uses <kbd>junit.xml</kbd> as a default, which is the default here too. If you haven't changed it, you can omit this input.

### `run-name`

The name of your run. This is typically `build` but can be configured individually. Make sure it matches your workflow config:

```yaml
build: # <- this one!
    steps:
        ...
```

## `jest-junit` Configuration

Have a look at how to call `jest-junit` in your workflows in the [documentation](https://www.npmjs.com/package/jest-junit#usage).
A very simple example is calling jest with a custom `--reporters` parameter:

```bash
  jest --ci --reporters=default --reporters=jest-junit
```

To provide **correct annotation locations**, you need to configure `jest-junit` to format the xml file in a compatible way.

Set these in either your package.json or through enviornment variables while running jest in your CI (Github).

### <kbd>package.json</kbd>

```json
"jest-junit": {
  "suiteNameTemplate": "{filepath}",
  "classNameTemplate": "{classname}",
  "titleTemplate": "{title}"
}
```

Refer to [`jest-junit` Documentation](https://www.npmjs.com/package/jest-junit#configuration) to see other ways to configure these.

Thank you and have an **amazing day**!
